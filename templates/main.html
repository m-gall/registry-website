<!DOCTYPE html>
<!--suppress ALL -->
<html lang="en">

{% extends "base.html" %}

{% block body %}
    <body>

    <div class="container" style="margin-top: 50px">
        <div class="row">
            <div class="col-sm-9 col-md-3 sidebar" style="margin-bottom: 80px; margin-top: 20px">
                <nav class="nav-sidebar">
                    <ul class="nav">
                        <li><a href="#">Home</a></li>
                        <li><a href="/registry-overview.html">Pipeline Registry</a></li>
                        <li><a href="/flagship.html">AGHA Flagships</a></li>
                        <li><a href="/explorer.html">CWL Explorer</a></li>
                        <li><a href="/resources.html">Resources</a></li>
                        <li><a href="/about.html">About</a></li>
                        <li><a href="/query.html"> Query Workflow TODO </a></li>

                    </ul>
                </nav>
            </div>
            <div class="'col s9">
                <h3 style=margin-left:50px;> Australian Genomics Registry of Pipelines </h3>
                <p style=margin-left:50px;color:black> This is the home of the Australian Genomics Bioinformatics
                    pipeline registry. </p>
                <div class="section">
                    <h5 style="font-size: 20px"> Purpose and scope </h5>
                    <p> The Australian Genomics registry provides a standardised description of the bioinformatic
                        pipelines.This includes the pipelines in operation across key
                        Australian Healthcare organisations including those used by Australian Genomics Flagships.
                        The pipelines have been described using a community-developed and engineered standard, the
                        Common Workflow language (CWL).
                        Using CWL explorer, the documents can be rendered into a dynamic graphical visualisation,
                        enabling detailed exploration of the structure and composition of a pipeline.</p>
                </div>

                <div class="section">
                    <h5 style="font-size: 20px"> Links </h5>
                    <ul class="list-unstyled components">
                        <li><a href="http://www.commonwl.org/" ; style=color:black;>The Common Workflow Language
                            (http://www.commonwl.org) </a></li>
                        <li><a href="http://edamontology.org/page" ; style=color:black;>EDAM Ontology
                            (http://edamontology.org/page) </a></li>
                        <li><a href="https://bio.tools/" ; style=color:black;>Elixir tool registry
                            (https://bio.tools) </a></li>
                        <li><a href="https://scicrunch.org/" ; style=color:black;>SciCrunch data portal
                            (https://scicrunch.org) </a></li>
                        <li><a href="http://rabix.io/" ; style=color:black;>Rabix tools for creating and running CWL
                            workflows (http://rabix.io/) </a></li>
                        <li><a href="https://view.commonwl.org/" ; style=color:black;>CWL Viewer
                            (https://view.commonwl.org/) </a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col s9" style="margin-left: 20px">
                <h3 style="margin-left: 0px; margin-bottom: 20px"> Pipelines registered </h3>
                <div id="googleMap" style="width:100%;height:400px"></div>
                <h3 style="margin-bottom:50px;margin-top: 20px"> Contributing Centres </h3>

                {% for row in institute_query_all %}
                    <img style='max-width:200px; max-height: 150px; margin-top: -20px;'
                         src="{{ url_for('static', filename='images/logos/' + row.institute_logo) }}">
                {% endfor %}

                <h3 style="margin-bottom:50px;"></h3>
            </div>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-1.12.0.min.js"></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
    <script>

        function myMap() {

            var locations =
                [
                    {% for row in instituterow %}
                        ['{{ row.institute_name }}', {{ row.institute_lat }}, {{ row.institute_long }}],
                    {% endfor %}
                ]
            ;

            var mapProp = {
                center: new google.maps.LatLng(-24.994167, 134.866944),
                zoom: 4,
                mapTypeId: 'satellite'
            }

            var map = new google.maps.Map(document.getElementById("googleMap"), mapProp)

            var image = {
                url: "/static/images/logos/sap.png",
                {#          size: new google.maps.Size(100, 100),#}
                scaledSize: new google.maps.Size(25, 8), // scaled size
                origin: new google.maps.Point(0, 0),
                anchor: new google.maps.Point(0, 0)
            };

            var markerImage = "/static/agha.ico";

            var count;
            for (count = 0; count < locations.length; count++) {

                var infowindow = new google.maps.InfoWindow({
                    content: locations[count][0],
                    maxWidth: 400
                });


                var marker = new google.maps.Marker({
                    position: new google.maps.LatLng(locations[count][1], locations[count][2]),
                    map: map,
                    {#                icon: image#}
                });

                google.maps.event.addListener(marker, 'click', function () {
                    infowindow.open(map, marker);
                });
            }


            {#            marker.setMap(googleMap);#}
        }


    </script>

    <script src="https://maps.googleapis.com/maps/api/js?key=AIzaSyDvRM8RUAyX8O9eODVQmPBoYngM2ya8BOU&callback=myMap"></script>


    </body>

{% endblock %}
</html>